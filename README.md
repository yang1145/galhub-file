# GalHub 文件管理系统

一个简洁快速的文件管理平台，用于 GalHub 游戏平台的文件分发。

## 功能特性

- 简洁快速的文件列表主页
- 管理员页面支持文件上传和管理
- 独立的文件下载页面
- SQLite 数据库存储文件信息
- 支持文件别名设置
- 文件大小限制为 4GB 以内
- 自动创建文件存储目录

## 技术栈

- Python 3.x
- Flask Web 框架
- SQLite 数据库
- HTML/CSS 前端界面

## 安装与部署

### 依赖安装

```bash
pip install -r requirements.txt
```

### 运行应用

```bash
python app.py
```

应用默认运行在 `http://127.0.0.1:5000`

## 使用说明

### 访问主页

访问 `http://127.0.0.1:5000` 查看文件列表主页。

### 管理员功能

1. 点击主页右上角的"管理员登录"按钮
2. 输入管理员密码（默认密码为 `admin`，请在生产环境中修改）
3. 在管理员面板中可以上传新文件和管理现有文件

### 文件上传

在管理员面板中：
1. 点击"选择文件"按钮选择要上传的文件
2. 可选地为文件设置别名
3. 点击"上传"按钮完成上传

### 文件下载

1. 在主页点击文件对应的"下载"链接
2. 在下载页面点击"点击下载"按钮开始下载

### 文件删除

在管理员面板中找到要删除的文件，点击"删除"链接并确认。

## 数据库结构

文件信息存储在 SQLite 数据库中，包含以下字段：

- `id`: 文件唯一标识符
- `filename`: 文件名
- `alias`: 文件别名（可选）
- `upload_time`: 上传时间（格式化时间字符串）
- `timestamp`: 上传时间戳
- `file_hash`: 文件 SHA256 哈希值

## 目录结构

```
galhub-file/
├── app.py              # 主应用文件
├── config.py           # 配置文件
├── requirements.txt    # 依赖列表
├── README.md           # 说明文档
├── files/              # 文件存储目录（自动创建）
├── templates/          # HTML 模板目录
│   ├── index.html      # 主页模板
│   ├── admin.html      # 管理员面板模板
│   ├── admin_login.html # 管理员登录模板
│   └── download.html   # 文件下载页面模板
└── files.db            # SQLite 数据库文件（自动创建）
```

## 安全提醒

1. 默认管理员密码为 `admin`，请在生产环境中修改
2. 应用使用 Flask 开发服务器，仅适用于开发和测试环境
3. 生产环境中应使用专业的 Web 服务器（如 Nginx、Apache）和 WSGI 服务器（如 Gunicorn）

## 配置修改

### 修改管理员密码

在 `app.py` 文件中找到以下代码：

```python
if password == 'admin':
```

将 `'admin'` 修改为所需的密码。

### 修改文件大小限制

在 `app.py` 文件中找到以下代码：

```python
MAX_FILE_SIZE = 4 * 1024 * 1024 * 1024  # 4GB in bytes
```

修改数值以调整文件大小限制。

## 许可证

请参阅 LICENSE 文件。